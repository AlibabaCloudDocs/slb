---
keyword: [应用型负载均衡实例, 监听, HTTP, 后端服务器]
---

# 添加HTTP监听

监听是用于检查连接请求的进程。您可以在创建负载均衡实例时定义监听，并可随时向负载均衡实例添加监听。HTTP协议适用于需要对数据内容进行识别的应用，如Web应用和小的手机游戏等。您可以添加一个HTTP监听转发来自HTTP协议的请求。

-   您已经创建了应用型负载均衡实例。具体操作，请参见[创建实例](/cn.zh-CN/应用型负载均衡ALB/ALB实例/创建实例.md)。
-   您已经指定可用的后端服务器，以将转发操作添加到默认的监听规则。具体操作，请参见[管理服务器组](/cn.zh-CN/应用型负载均衡ALB/ALB服务器组/管理服务器组.md)。

1.  登录[负载均衡管理控制台](https://slb.console.aliyun.com/slb)。

2.  在左侧导航栏，选择**应用型负载均衡ALB** \> **实例**。

3.  在实例页面，单击目标实例**操作**列下的**创建监听**。

4.  在负载均衡业务配置向导的配置监听页面，完成以下配置。

    |监听配置|说明|
    |:---|:-|
    |**选择负载均衡协议**|选择监听的协议类型。 本示例选择**HTTP**。 |
    |**监听端口**|输入用来接收请求并向后端服务器进行请求转发的监听端口，端口范围为1~65535。 通常HTTP协议使用80端口，HTTPS协议使用443端口。**说明：** 在同一个负载均衡实例内，监听端口不可重复。

本示例输入**80**。 |
    |**监听名称**|输入监听名称。长度为2~256个字符，必须是中文和以下字符串中的字符：`/^([^\x00-\xff]|[\w.,;/@-]){2,256}$/`。|
    |**高级配置**|
    |**连接空闲超时时间**|指定连接空闲超时时间，取值范围为1~60秒。 在超时时间内一直没有访问请求，负载均衡会暂时中断当前连接，直到下一次请求来临时重新建立新的连接。

**说明：** 该功能对使用HTTP/2.0的请求暂不生效。 |
    |**连接请求超时时间**|指定请求超时时间，取值范围为1~180秒。 在超时时间内后端服务器一直没有响应，负载均衡将放弃等待，给客户端返回HTTP 504错误码。 |
    |**Gzip数据压缩**|开启该配置对特定文件类型进行压缩。 目前Gzip支持压缩的类型包括：`text/xml`、`text/plain`、`text/css`、`application/javascript`、`application/x-javascript`、`application/rss+xml`、`application/atom+xml`和`application/xml`。 |
    |**附加HTTP头字段**|选择您要添加的自定义HTTP头字段：     -   添加`X-Forwarded-For`头字段获取客户端的IP地址。
    -   添加`SLB-ID`头字段获取负载均衡实例的ID。
    -   添加`X-Forwarded-Proto`头字段获取实例的监听协议。
    -   添加`X-Forwarded-Port`头字段获取实例的监听端口。
    -   添加`X-Forwarded-Client-Port`头字段获取访问负载均衡实例客户端的端口。 |

5.  单击**下一步**。

6.  在选择服务器组页面，选择服务器组，查看已添加的后端服务器的详细信息。

7.  单击**下一步**。

8.  在配置审核页面，确认配置信息，单击**提交**。


