---
keyword: [SLB, 负载均衡, 后端服务器, 流量转发]
---

# 后端服务器概述

在使用负载均衡服务前，您需要添加ECS实例作为负载均衡实例的后端服务器，用来接收负载均衡监听转发的请求。

## 后端服务器简介

负载均衡服务通过设置虚拟服务地址，将添加的同一地域的多台ECS实例虚拟成一个高性能、高可用的应用服务池。您也可以通过虚拟服务器组管理后端服务器。不同的监听可以关联不同的服务器组，这样一个负载均衡实例可以将请求根据不同监听转发给不同的服务器组内不同端口的后端服务器。

**说明：** 如果您在配置监听时，选择使用虚拟服务器组，那么该监听会将请求转发到关联的服务器组中的ECS，而不会再将请求转发给默认服务器组中的ECS实例。

## 限制说明

您可以在任意时刻增加或减少负载均衡实例的后端ECS数量，还可以在不同ECS实例之间进行流量分发切换。但是为了保证您对外服务的稳定性，确保在执行上述操作时，开启了负载均衡的健康检查功能并同时保证负载均衡实例中至少有一台正常运行的ECS。

添加后端服务器时，有以下限制条件：

-   负载均衡不支持跨地域部署，确保ECS实例的所属地域和负载均衡实例的所属地域相同。
-   负载均衡本身不会限制后端ECS实例使用哪种操作系统，只要您的两台ECS实例中的应用服务部署是相同的且保证数据的一致性即可。建议您选择相同操作系统的ECS实例作为后端服务器，以便日后管理和维护。
-   一个负载均衡实例最多支持添加50个监听，每个监听对应后端ECS实例上的一个应用。负载均衡的监听端口对应后端ECS实例上的应用服务端口。
-   您可以指定后端服务器池内各ECS实例的转发权重。权重越高的ECS实例将被分配到更多的访问请求。
-   如果您同时开启了会话保持功能，那么有可能会造成后端服务器的访问并不是完全相同的。如果出现了访问不均衡的情况，建议您暂时关闭会话保持功能，观察一下是否依然存在这种情况。

    当负载均衡服务分发请求不均匀时，请参考以下方法检查处理：

    1.  统计一个时间段内，后端ECS实例的Web服务访问日志记录数据量。
    2.  按照负载均衡的配置，对比多台ECS实例日志的数量是否有相差。（开启会话保持后，需要剥离相同IP的访问日志。如果负载均衡配置了权重，要根据权重比例计算日志中访问比例是否正常。）
-   ECS进行热迁移时，可能导致SLB长连接断开。重新连接后即可恢复，请做好应用的重连工作。

## 默认服务器组

用来接收前端请求的ECS实例。如果监听没有设置虚拟服务器组或主备服务器组，默认将请求转发至默认服务器组中的ECS。

在使用负载均衡服务前，必须至少添加一台默认服务器接收负载均衡转发的客户端请求。具体操作，请参见[添加ECS实例作为默认服务器](/cn.zh-CN/用户指南/后端服务器/默认服务器组/添加默认服务器.md)。

## 虚拟服务器组

当您需要将不同的请求转发到不同的后端服务器上时，或需要通过域名和URL进行请求转发时，可以选择使用虚拟服务器组。具体操作，请参见[创建虚拟服务器组](/cn.zh-CN/用户指南/后端服务器/虚拟服务器组/创建虚拟服务器组.md)。

## 主备服务器组

一个主备服务器组只包括两台ECS实例，一台作为主服务器，一台作为备服务器。由于备服务器不会做健康检查，所以只要主服务器健康检查失败，系统会直接将流量切到备机。当主服务器健康检查成功恢复服务后，流量会自动切到主服务器。具体操作，请参见[创建主备服务器组](/cn.zh-CN/用户指南/后端服务器/主备服务器/创建主备服务器组.md)。

**说明：** 只有TCP和UDP监听支持添加主备服务器组。

**相关文档**  


[添加ECS实例作为默认服务器](/cn.zh-CN/用户指南/后端服务器/默认服务器组/添加默认服务器.md)

[创建虚拟服务器组](/cn.zh-CN/用户指南/后端服务器/虚拟服务器组/创建虚拟服务器组.md)

[创建主备服务器组](/cn.zh-CN/用户指南/后端服务器/主备服务器/创建主备服务器组.md)

